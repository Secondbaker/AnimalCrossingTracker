<p id="notice"><%= notice %></p>

<section class="heading">
	<div class="title">
		<h1><%= @island_collection.title %></h1>
    	<p class="collection-count"><span id="count-checked-checkboxes">0</span> / <span id="count-checkboxes">0</span> collected</p>
	</div>
	<div class="sort">
		<%select_options = [] %>
		<% @island_collection.collectibles.first.collectible_attributes.each do |collectible_attribute| %>
			<% select_options.push collectible_attribute.collectible_attribute_type.name %>
		<% end %>
		<div class="sort_by">
			<%= select_tag "sort_by", options_for_select(select_options) %>
		</div>
		<div class="order">
			<%= select_tag "order", options_for_select(['Ascending', 'Descending']) %>
		</div>
		<div class="filter-checkbox">
			<%= label_tag "Current month only?" %>
			<%= check_box_tag "current_month"%>
		</div>
		<%= link_to 'Sort', island_collection_sort_and_filter_path( sort_by: select_options.first, order: 'asc', filter: 'current_month' , island_collection_id: @island_collection.id), html_options = { id: 'sort_link' } %>
	</div>
</section>

<section id="collection" class="collection-items">
	<% @collectibles.each do |collectible| %>
		<div>
			<div class="collectible">
				<%= link_to collectible_toggle_path(collectible), :data => {:remote => true, :method => :patch} do %>
					<% unless collectible.thumbnail == nil%>
						<%= image_tag collectible.thumbnail, height: '100', width: '100' %>
					<% end %>
				<% end %>
				<%= check_box_tag "Complete", collectible.complete, collectible.complete, id: collectible.id.to_s + "-complete" , :data => {:remote => true, :url => url_for(collectible_toggle_path(collectible)), :method => :patch } %>
			</div>
			<%= link_to collectible.name, island_collection_set_modal_path(island_collection_id: @island_collection.id, id: collectible.id), html_options = { remote: true, class: "modal-btn", id: "btn-" + collectible.id.to_s } %>
		</div>
	<% end %>
</section>

<section class="modals">
	<div class="modal" id="modal">
		<%= render partial: "collectibles/show", locals: { collectible: @island_collection.collectibles.first } %>
	</div>
</section>

<%= link_to 'Edit', edit_island_collection_path(@island_collection) %> |
<%= link_to 'Back', island_collections_path %>